<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Opacity Display</title>
    <link href="./dist/output.css" rel="stylesheet">
    <style>
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen flex flex-col">
        <!-- Color Inputs -->
        <div class="flex p-4 gap-4">
            <div class="flex-1 flex gap-2 items-center">
                <div class="flex items-center gap-2 flex-1">
                    <span>Color:</span>
                    <input type="text" value="#FF2442" class="flex-1 border p-1 text-center" 
                           oninput="updateColor(this, 'col1')">
                </div>
                <div class="flex items-center gap-2 flex-1">
                    <span>Grayscale:</span>
                    <div class="tooltip">
                        <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                        </svg>
                        <span class="tooltiptext">Grayscale (0-100) applies to 10-50% opacity</span>
                    </div>
                    <input type="number" value="0" min="0" max="100" 
                           class="flex-1 border p-1 text-center"
                           oninput="updateGrayscale(this, 'col1')">
                </div>
            </div>
            <div class="flex-1 flex gap-2 items-center">
                <div class="flex items-center gap-2 flex-1">
                    <span>Color:</span>
                    <input type="text" value="#007AFF" class="flex-1 border p-1 text-center" 
                           oninput="updateColor(this, 'col2')">
                </div>
                <div class="flex items-center gap-2 flex-1">
                    <span>Grayscale:</span>
                    <div class="tooltip">
                        <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                        </svg>
                        <span class="tooltiptext">Grayscale (0-100) applies to 10-50% opacity</span>
                    </div>
                    <input type="number" value="0" min="0" max="100" 
                           class="flex-1 border p-1 text-center"
                           oninput="updateGrayscale(this, 'col2')">
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex relative">
            <!-- Opacity Labels - Absolute positioned over left scale -->
            <div class="absolute left-4 top-0 flex flex-col justify-between h-full py-4 text-right">
                <div>100%</div>
                <div>90%</div>
                <div>80%</div>
                <div>70%</div>
                <div>60%</div>
                <div>50%</div>
                <div>40%</div>
                <div>30%</div>
                <div>20%</div>
                <div>10%</div>
            </div>

            <div class="absolute right-4 top-0 flex flex-col justify-between h-full py-4 text-right">
                <div>100%</div>
                <div>90%</div>
                <div>80%</div>
                <div>70%</div>
                <div>60%</div>
                <div>50%</div>
                <div>40%</div>
                <div>30%</div>
                <div>20%</div>
                <div>10%</div>
            </div>

            <!-- Color Scales -->
            <div class="flex-1 flex">
                <!-- Color Column 1 -->
                <div class="flex-1 flex flex-col">
                    <div id="col1-100" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-90" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-80" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-70" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-60" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-50" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-40" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-30" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-20" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col1-10" class="flex-1 border-r flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                </div>

                <!-- Color Column 2 -->
                <div class="flex-1 flex flex-col">
                    <div id="col2-100" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-90" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-80" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-70" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-60" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-50" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-40" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-30" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-20" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                    <div id="col2-10" class="flex-1 flex items-center justify-center">
                        <div class="text-white font-bold" style="font-size: 36pt;">Button</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let grayscaleValues = {
            'col1': 0,
            'col2': 0
        };

        function updateGrayscale(input, colId) {
            const value = Math.max(0, Math.min(100, parseInt(input.value) || 0));
            input.value = value;
            grayscaleValues[colId] = value;
            updateColor(document.querySelector(`input[type="text"][oninput*="${colId}"]`), colId);
        }

        function updateColor(input, colId) {
            const color = input.value;
            if (/^#[0-9A-F]{6}$/i.test(color)) {
                const r = parseInt(color.slice(1, 3), 16);
                const g = parseInt(color.slice(3, 5), 16);
                const b = parseInt(color.slice(5, 7), 16);
                
                for (let opacity = 100; opacity >= 10; opacity -= 10) {
                    const box = document.getElementById(`${colId}-${opacity}`);
                    
                    if (opacity <= 50 && grayscaleValues[colId] > 0) {
                        // Apply grayscale for opacities 10-50%
                        const grayscaleFactor = grayscaleValues[colId] / 100;
                        const avgColor = (r + g + b) / 3;
                        const mixedR = r * (1 - grayscaleFactor) + avgColor * grayscaleFactor;
                        const mixedG = g * (1 - grayscaleFactor) + avgColor * grayscaleFactor;
                        const mixedB = b * (1 - grayscaleFactor) + avgColor * grayscaleFactor;
                        box.style.backgroundColor = `rgba(${mixedR}, ${mixedG}, ${mixedB}, ${opacity/100})`;
                    } else {
                        box.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${opacity/100})`;
                    }
                }
            }
        }

        // Initialize colors
        updateColor(document.querySelector('input[value="#FF2442"]'), 'col1');
        updateColor(document.querySelector('input[value="#007AFF"]'), 'col2');
    </script>
</body>
</html>
